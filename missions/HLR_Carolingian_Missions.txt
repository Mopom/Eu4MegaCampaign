hlr_karl_scourge_of_islam_1 = {
	slot = 1
	generic = no
	ai = yes
	
	potential_on_load = {
		has_dlc = "Emperor"
	}
	potential = {
		has_dlc = "Emperor"
		tag = HLR
		NOT = { map_setup = map_setup_random }
	}
	
	has_country_shield = yes
	
	hlr_karl_vasconia = {
		icon = mission_golden_century
		required_missions = {  }
		provinces_to_highlight = {
			area = basque_country
			NOT = {	owned_by = ROOT }
		}
		trigger = {
			owns_core_province = 210
			owns_core_province = 209
			owns_core_province = 2989
		}
		effect = {
			asturias_area = {
				add_permanent_claim = ROOT
			}
			castille_area = {
				add_permanent_claim = ROOT
			}
		}
	}
	hlr_karl_asturias_castille = {
		icon = mission_occupy_alexandria
		required_missions = { hlr_karl_vasconia }
		provinces_to_highlight = {
			OR = {
				area = asturias_area
				area = castille_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			asturias_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
			castille_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
		}
		effect = {
			toledo_area = {
				add_permanent_claim = ROOT
			}
			extremadura_area = {
				add_permanent_claim = ROOT
			}
			leon_area = {
				add_permanent_claim = ROOT
			}
		}
	}
	hlr_karl_heart_of_iberia = {
		icon = mission_tear_down_spanish_strongholds
		required_missions = { hlr_karl_asturias_castille hlr_karl_conversos }
		provinces_to_highlight = {
			OR = {
				area = toledo_area
				area = extremadura_area
				area = leon_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			toledo_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
			extremadura_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
			leon_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
		}
		effect = {
			lower_andalucia_area = {
				add_permanent_claim = ROOT
			}
			upper_andalucia_area = {
				add_permanent_claim = ROOT
			}
			galicia_area = {
				add_permanent_claim = ROOT
			}
			beieras_area = {
				add_permanent_claim = ROOT
			}
			alentejo_area = {
				add_permanent_claim = ROOT
			}
		}
	}
	hlr_karl_atlantico = {
		icon = mission_portuguese_interference
		required_missions = { hlr_karl_heart_of_iberia }
		provinces_to_highlight = {
			OR = {
				area = galicia_area
				area = beieras_area
				area = alentejo_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			galicia_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
			beieras_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
			alentejo_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = views_of_the_atlantic
				duration = 7300
			}
		}
	}
}
hlr_karl_scourge_of_islam_2 = {
	slot = 2
	generic = no
	ai = yes
	
	potential_on_load = {
		has_dlc = "Emperor"
	}
	potential = {
		has_dlc = "Emperor"
		tag = HLR
		NOT = { map_setup = map_setup_random }
	}
	
	has_country_shield = yes
	
	hlr_karl_aragon = {
		icon = mission_al-wadi_al-kabir
		required_missions = {  }
		provinces_to_highlight = {
			OR = {
				area = catalonia_area
				area = aragon_area
				area = valencia_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			catalonia_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
			aragon_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
			valencia_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = ae_stuff
				duration = 5475
			}
		}
	}
	hlr_karl_conversos = {
		icon = spread_piety
		required_missions = { hlr_karl_vasconia hlr_karl_aragon }
		provinces_to_highlight = {
			OR = {
				area = catalonia_area
				area = aragon_area
				area = basque_country
			}
		}
		trigger = {
			catalonia_area = {
				type = all
				has_owner_religion = yes
			}
			aragon_area = {
				type = all
				has_owner_religion = yes
			}
			basque_country = {
				type = all
				has_owner_religion = yes
			}
		}
		effect = {
			add_country_modifier = {
				name = charlemagnes_churches
				duration = 5475
			}
		}
	}
	hlr_karl_the_cross = {
		icon = show_piety
		required_missions = { hlr_karl_conversos }
		provinces_to_highlight = {
			OR = {
				area = valencia_area
				area = toledo_area
				area = extremadura_area
				area = castille_area
				area = leon_area
				area = asturias_area
			}
		}
		trigger = {
			valencia_area = {
				type = all
				has_owner_religion = yes
			}
			toledo_area = {
				type = all
				has_owner_religion = yes
			}
			extremadura_area = {
				type = all
				has_owner_religion = yes
			}
			castille_area = {
				type = all
				has_owner_religion = yes
			}
			leon_area = {
				type = all
				has_owner_religion = yes
			}
			asturias_area = {
				type = all
				has_owner_religion = yes
			}
		}
		effect = {
			add_country_modifier = {
				name = cross_iberia
				duration = 7300
			}
		}
	}
	hlr_karl_iberia_united = {
		icon = mission_develop_alhambra
		required_missions = { hlr_karl_heart_of_iberia }
		provinces_to_highlight = {
			OR = {
				area = lower_andalucia_area
				area = upper_andalucia_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			lower_andalucia_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
			upper_andalucia_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = unity_of_iberia
				duration = -1
			}
		}
	}
	hlr_karl_religion_united = {
		icon = chivalry_is_not_dead
		required_missions = { hlr_karl_iberia_united }
		provinces_to_highlight = {
			OR = {
				area = basque_country
				area = catalonia_area
				area = aragon_area
				area = valencia_area
				area = asturias_area
				area = castille_area
				area = toledo_area
				area = extremadura_area
				area = leon_area
				area = galicia_area
				area = beieras_area
				area = alentejo_area
				area = lower_andalucia_area
				area = upper_andalucia_area
			}
			NOT = { has_owner_religion = yes }
		}
		trigger = {
			calc_true_if = {
				all_province = {
					OR = {
						area = basque_country
						area = catalonia_area
						area = aragon_area
						area = valencia_area
						area = asturias_area
						area = castille_area
						area = toledo_area
						area = extremadura_area
						area = leon_area
						area = galicia_area
						area = beieras_area
						area = alentejo_area
						area = lower_andalucia_area
						area = upper_andalucia_area
					}
				owned_by = ROOT
				has_owner_religion = yes
				}
				amount = 53
			}
		}
		effect = {
			1751 = {
				add_claim = ROOT
			}
			335 = {
				add_claim = ROOT
			}
			add_country_modifier = {
				name = the_african_front
				duration = 3650
			}
		}
	}
	hlr_karl_cities_of_conversion_1 = {
		icon = mission_occupy_alexandria
		required_missions = { hlr_karl_religion_united }
		provinces_to_highlight = {
			OR = {
				province_id = 338
				province_id = 341
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			338 = {
				is_core = ROOT
				owned_by = ROOT
				has_owner_religion = yes
			}
			341 = {
				is_core = ROOT
				owned_by = ROOT
				has_owner_religion = yes
			}
		}
		effect = {
			tunisia_area = {
				add_permanent_claim = ROOT
			}
		}
	}
	hlr_karl_gift_for_pope = {
		icon = holy_state
		required_missions = { hlr_karl_cities_of_conversion_1 hlr_karl_papacy }
		provinces_to_highlight = {
			area = tunisia_area
			NOT = { owned_by = ROOT }
		}
		trigger = {
			AND = {
				tunisia_area = {
					type = all
					is_core = ROOT
					owned_by = ROOT
					religion = catholic
				}
				OR = {
					AND = {
						127 = {
							owned_by = PAP
						}
						4735 = {
							owned_by = PAP
						}
						2986 = {
							owned_by = PAP
						}
					}
					AND = {
						125 = {
							owned_by = PAP
						}
						4736 = {
							owned_by = PAP
						}
						4737 = {
							owned_by = PAP
						}
					}
				}
			}
		}
		effect = {
			tunisia_area = {
				type = all
				cede_province = PAP
				add_core = PAP
				remove_core = HLR
			}
			add_country_modifier = {
				name = papal_gifts
				duration = -1
			}
		}
	}
}
hlr_karl_mending_the_schism_1 = {
	slot = 1
	generic = no
	ai = yes
	
	potential_on_load = {
		has_dlc = "Emperor"
	}
	potential = {
		has_dlc = "Emperor"
		tag = HLR
		NOT = { map_setup = map_setup_random }
	}
	
	has_country_shield = yes
	
	hlr_karl_catholicism = {
		icon = mission_european_church
		required_missions = {  }
		trigger = {
			118 = {
				has_building = cathedral
			}
			116 = {
				has_building = cathedral
			}
			4730 = {
				has_building = cathedral
			}
			101 = {
				has_building = cathedral
			}
			109 = {
				has_building = cathedral
			}
			112 = {
				has_building = cathedral
			}
			104 = {
				has_building = cathedral
			}
		}
		effect = {
			change_religion = catholic
			add_country_modifier = {
				name = catholic_conversion_karl
				duration = 7300
			}
			hidden_effect = {
				every_province = {
					if = {
						limit = {
							region = italy_region
							owned_by = ROOT
						}
						change_religion = catholic
					}
				}
			}
		}
	}
	hlr_karl_papacy = {
		icon = holy_state
		required_missions { hlr_karl_catholicism }
		provinces_to_highlight = {
			OR = {
				area = lazio_area
				area = central_italy_area
				area = tuscany_area
				area = emilia_romagna_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			lazio_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
			central_italy_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
			tuscany_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
			emilia_romagna_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
			religion = catholic
			religious_unity = 0.9
		}
		effect = {
			lazio_area = {
				type = all
				add_core = PAP
				cede_province = PAP
				remove_core = HLR
			}
			central_italy_area = {
				type = all
				add_core = PAP
				cede_province = PAP
				remove_core = HLR
			}
			tuscany_area = {
				type = all
				add_core = PAP
				cede_province = PAP
				remove_core = HLR
			}
			emilia_romagna_area = {
				type = all
				add_core = PAP
				cede_province = PAP
				remove_core = HLR
			}
			vassalize = PAP
		}
	}
}
hlr_karl_scourge_of_islam_3 = {
	slot = 3
	generic = no
	ai = yes
	
	potential_on_load = {
		has_dlc = "Emperor"
	}
	potential = {
		has_dlc = "Emperor"
		tag = HLR
		NOT = { map_setup = map_setup_random }
	}
	
	has_country_shield = yes
	
	hlr_karl_cities_of_conversion_2 = {
		icon = mission_imperial_cities
		required_missions = { hlr_karl_religion_united }
		position = 6
		provinces_to_highlight = {
			OR = {
				province_id = 1751
				province_id = 335
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			1751 = {
				is_core = ROOT
				owned_by = ROOT
				has_owner_religion = yes
			}
			335 = {
				is_core = ROOT
				owned_by = ROOT
				has_owner_religion = yes
			}
		}
		effect = {
			northern_morocco_area = {
				add_permanent_claim = ROOT
			}
			343 = {
				add_permanent_claim = ROOT
			}
		}
	}
	hlr_karl_norf_africa = {
		icon = mission_conquer_tunisia
		required_missions = { hlr_karl_cities_of_conversion_2 }
		position = 7
		provinces_to_highlight = {
			OR = {
				area = northern_morocco_area
				province_id = 343
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			northern_morocco_area = {
				type = all
				is_core = ROOT
				owned_by = ROOT
			}
			343 = {
				is_core = ROOT
				owned_by = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = foothold_africa
				duration = -1
			}
		}
	}
}
